# Sleep Serviceï¼šæ™ºèƒ½ç¡çœ è¾…åŠ©ç³»ç»Ÿå®Œæ•´æ¶æ„æ–‡æ¡£

<div align="center">
  <img src="https://img.shields.io/badge/Spring%20Boot-3.4.4-brightgreen.svg" alt="Spring Boot">
  <img src="https://img.shields.io/badge/MySQL-8.0-blue.svg" alt="MySQL">
  <img src="https://img.shields.io/badge/Etcd-3.5.9-purple.svg" alt="Etcd">
  <img src="https://img.shields.io/badge/K8s-1.24+-orange.svg" alt="Kubernetes">
  <img src="https://img.shields.io/badge/ESP8266-ESP32-green.svg" alt="IoT Devices">
  <img src="https://img.shields.io/badge/JDK-17-red.svg" alt="JDK">
</div>

---

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**Sleep Service** æ˜¯ä¸€æ¬¾åŸºäºç‰©è”ç½‘ä¸åˆ†å¸ƒå¼æŠ€æœ¯çš„æ™ºèƒ½ç¡çœ è¾…åŠ©ç³»ç»Ÿï¼Œé€šè¿‡å®æ—¶é‡‡é›†ç¯å¢ƒä¸ç”Ÿç†æ•°æ®ï¼Œç»“åˆæ™ºèƒ½å†³ç­–å¼•æ“ä¸ºç”¨æˆ·æä¾›ä¸ªæ€§åŒ–ç¡çœ ä¼˜åŒ–æ–¹æ¡ˆã€‚ç³»ç»Ÿé‡‡ç”¨å¾®æœåŠ¡æ¶æ„è®¾è®¡ï¼Œæ”¯æŒå¤šè®¾å¤‡æ¥å…¥ã€åˆ†å¸ƒå¼æ•°æ®å­˜å‚¨ä¸å®¹å™¨åŒ–éƒ¨ç½²ï¼Œä¸ºç”¨æˆ·æ‰“é€ ç§‘å­¦ã€ä¾¿æ·çš„ç¡çœ ç®¡ç†ç”Ÿæ€ã€‚

**æ ¸å¿ƒä»·å€¼**ï¼š
- å®æ—¶ç›‘æµ‹ç¡çœ ç¯å¢ƒå…³é”®æŒ‡æ ‡ï¼ˆæ¸©åº¦ã€æ¹¿åº¦ã€å™ªéŸ³ï¼‰
- ç»“åˆç”Ÿç†æ•°æ®ï¼ˆå¿ƒç‡ï¼‰æä¾›ç²¾å‡†ç¡çœ å»ºè®®
- é›†æˆèˆ’ç¼“éŸ³ä¹åº“è¾…åŠ©ç¡çœ 
- æ”¯æŒå¤šç»ˆç«¯è®¿é—®ä¸å®¹å™¨åŒ–éƒ¨ç½²

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„
```
### æ•´ä½“æ¶æ„å›¾
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                   ğŸ”µ æ„ŸçŸ¥å±‚ (IoTè®¾å¤‡)                                      |
â”‚                                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚    ğŸŸ¢ ESP8266 è®¾å¤‡  â”‚                      â”‚     ğŸŸ¢ ESP32 è®¾å¤‡   â”‚                      â”‚
â”‚  â”‚  ï¼ˆæ¸©æ¹¿åº¦/å™ªéŸ³é‡‡é›†ï¼‰ â”‚                      â”‚    ï¼ˆå¿ƒç‡é‡‡é›†ï¼‰     â”‚                      â”‚
â”‚  â”‚                     â”‚                      â”‚                     â”‚                      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                      â”‚
â”‚  â”‚  â”‚  ğŸŸ¡æ•°æ®é‡‡é›†æ¨¡å— â”‚  â”‚                      â”‚  â”‚  ğŸŸ¡å¿ƒç‡æ ¡å‡†æ¨¡å— â”‚  â”‚                      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                      â”‚
â”‚  â”‚          â”‚          â”‚                      â”‚          â”‚          â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                                           â”‚
              â–¼                                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                   ğŸŸ£ æ¥å…¥å±‚ (API Gateway)                                   â”‚
â”‚                                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                ğŸŸ¤ç»Ÿä¸€æ¥å£ç½‘å…³                                        â”‚   â”‚
â”‚  â”‚  ï¼ˆè¯·æ±‚è·¯ç”±/è´Ÿè½½å‡è¡¡/ä»¤ç‰ŒéªŒè¯ï¼‰                                                        â”‚   â”‚
â”‚  â”‚                                                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ ğŸŸ /addSensorâ”‚ â”‚ğŸŸ /addSensor32  â”‚ğŸŸ /getStrategy |ğŸŸ /getMusicList â”‚   ğŸŸ /Token  â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                                           â”‚
              â–¼                                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                   ğŸŸ¡ æœåŠ¡å±‚ (K8s é›†ç¾¤éƒ¨ç½²)                                  â”‚
â”‚                                                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚    ğŸŸ¢æ•°æ®é‡‡é›†æœåŠ¡   â”‚  â”‚    ğŸŸ¢ç­–ç•¥å¼•æ“æœåŠ¡    â”‚  â”‚    ğŸŸ¢éŸ³ä¹èµ„æºæœåŠ¡    â”‚                 â”‚
â”‚  â”‚                     â”‚  â”‚                     â”‚  â”‚                     â”‚                 â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                 â”‚
â”‚  â”‚  â”‚ ğŸ”µæ•°æ®æ ¼å¼æ ¡éªŒ â”‚  â”‚  â”‚ ğŸ”µå¤šç»´åº¦ç­–ç•¥è®¡ç®— â”‚ â”‚   â”‚ ğŸ”µéŸ³ä¹åˆ—è¡¨ç®¡ç†    â”‚  â”‚                 â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                 â”‚
â”‚  â”‚          â”‚          â”‚  â”‚          â”‚          â”‚  â”‚          â”‚          â”‚                 â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”‚                 â”‚
â”‚  â”‚  â”‚ ğŸ”µæ•°æ®åŒå†™å¤„ç† â”‚  |  â”‚ ğŸ”µç­–ç•¥ç»“æœç¼“å­˜  â”‚   â”‚  â”‚  â”‚ ğŸ”µèµ„æºè¯»å–ä¼˜åŒ– â”‚  â”‚                 â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                 â”‚
â”‚  â”‚          â”‚          â”‚  â”‚          â”‚          â”‚  â”‚                     â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚             â”‚                        â”‚                                                     â”‚
â”‚             â–¼                        â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚    ğŸ”µæ•°æ®å­˜å‚¨å±‚     â”‚  â”‚    ğŸ”µæœåŠ¡æ³¨å†Œå‘ç°    â”‚  â”‚    ğŸ”µé…ç½®ä¸­å¿ƒ       â”‚                 â”‚
â”‚  â”‚                     â”‚  â”‚                     â”‚  â”‚                     â”‚                 â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                 â”‚
â”‚  â”‚  â”‚ ğŸŸ£MySQL 8.0  â”‚  â”‚  â”‚  â”‚ ğŸŸ£Etcd é›†ç¾¤   â”‚  â”‚  â”‚  â”‚ ğŸŸ£åŠ¨æ€é…ç½®     â”‚ â”‚                 â”‚
â”‚  â”‚  â”‚ ï¼ˆå†å²æ•°æ®ï¼‰   â”‚  â”‚  â”‚  â”‚ ï¼ˆæœåŠ¡æ³¨å†Œï¼‰   â”‚  â”‚  â”‚  â”‚ ï¼ˆå‚æ•°ç®¡ç†ï¼‰   â”‚  â”‚                 â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                 â”‚
â”‚  â”‚                     â”‚  â”‚                     â”‚  â”‚                     â”‚                 â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚                     â”‚                 â”‚
â”‚  â”‚  â”‚ ğŸŸ£Etcd é›†ç¾¤   â”‚  â”‚  â”‚  â”‚ ğŸŸ£ç§Ÿçº¦ç»­çº¦æœºåˆ¶    â”‚  â”‚                    â”‚                 â”‚
â”‚  â”‚  â”‚ ï¼ˆå®æ—¶æ•°æ®ï¼‰   â”‚  â”‚  â”‚  â”‚ ï¼ˆé«˜å¯ç”¨ä¿éšœï¼‰ â”‚  â”‚  â”‚                     â”‚                 â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚                     â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                                           â”‚
              â–¼                                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                   ğŸŸ¤ åº”ç”¨å±‚ (å®¢æˆ·ç«¯)                                         â”‚
â”‚                                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚    ğŸŸ¢Web å®¢æˆ·ç«¯     â”‚  â”‚    ğŸŸ¢æ‰‹æœº APP       â”‚  â”‚    ğŸŸ¢è¿ç»´ç®¡ç†å¹³å°   â”‚                   â”‚
â”‚  â”‚                     â”‚  â”‚                     â”‚  â”‚                     â”‚                  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                  â”‚
â”‚  â”‚  â”‚ ğŸ”µæ•°æ®å¯è§†åŒ–ç•Œé¢ â”‚   â”‚  â”‚ ğŸ”µå®æ—¶æ•°æ®å±•ç¤º â”‚ â”‚  â”‚ â”‚ ğŸ”µKuboard v3  â”‚   â”‚                  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚ ï¼ˆé›†ç¾¤ç®¡ç†ï¼‰   â”‚  â”‚                  â”‚
â”‚  â”‚                     â”‚  â”‚                     â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚                     â”‚                  â”‚
â”‚  â”‚  â”‚ ğŸ”µç­–ç•¥æŸ¥çœ‹åŠŸèƒ½ â”‚  â”‚  â”‚  â”‚ ğŸ”µéŸ³ä¹æ§åˆ¶åŠŸèƒ½   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚ ğŸ”µæ—¥å¿—ç›‘æ§ä¸­å¿ƒ â”‚  â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                  â”‚
â”‚                                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
```
é¢œè‰²è¯´æ˜
é¢œè‰²æ ‡è¯†	å«ä¹‰	åº”ç”¨åœºæ™¯
ğŸ”µ	å±‚çº§ / æ¨¡å—æ ‡è¯†	æ„ŸçŸ¥å±‚ã€æ¥å…¥å±‚ã€æœåŠ¡å±‚ç­‰å¤§å±‚çº§æ ‡é¢˜
ğŸŸ¢	æ ¸å¿ƒç»„ä»¶ / è®¾å¤‡	ESP è®¾å¤‡ã€æœåŠ¡å®ä¾‹ã€å®¢æˆ·ç«¯åº”ç”¨
ğŸŸ¡	åŠŸèƒ½å­æ¨¡å—	æ•°æ®é‡‡é›†æ¨¡å—ã€å¿ƒç‡æ ¡å‡†æ¨¡å—
ğŸŸ¤	å…³é”®åŸºç¡€è®¾æ–½	æ¥å£ç½‘å…³ã€è¿ç»´ç®¡ç†å¹³å°
æ’ç‰ˆè¯´æ˜
æ‰€æœ‰å±‚çº§æ¡†é‡‡ç”¨ç»Ÿä¸€å®½åº¦ï¼Œç¡®ä¿æ¨ªå‘å¯¹é½
ç»„ä»¶å†…éƒ¨å­æ¨¡å—ä½¿ç”¨ç›¸åŒç¼©è¿›ï¼Œä¿æŒçºµå‘å¯¹é½
æ•°æ®æµå‘ç®­å¤´ï¼ˆâ”‚/â””/â”˜/â–¼ï¼‰å‚ç›´å±…ä¸­ï¼Œæ¸…æ™°ä½“ç°å±‚çº§é—´ä¾èµ–å…³ç³»
åŒç±»ç»„ä»¶ï¼ˆå¦‚ ESP è®¾å¤‡ã€æœåŠ¡å®ä¾‹ï¼‰é‡‡ç”¨ç›¸åŒå°ºå¯¸çš„æ–¹æ¡†ï¼Œæå‡è§†è§‰ä¸€è‡´æ€§
å…³é”®æ¥å£ / åŠŸèƒ½æ ‡æ³¨åœ¨å¯¹åº”æ¨¡å—ä¸‹æ–¹ï¼Œä¾¿äºå¿«é€Ÿå®šä½æ ¸å¿ƒèƒ½åŠ›
```
### æŠ€æœ¯æ ˆè¯¦æƒ…

| æ¨¡å— | æŠ€æœ¯é€‰å‹ | ç‰ˆæœ¬ | æ ¸å¿ƒä½œç”¨ |
|------|---------|------|---------|
| åç«¯æ¡†æ¶ | Spring Boot | 3.4.4 | æä¾›RESTful APIä¸æœåŠ¡é›†æˆ |
| æ•°æ®æŒä¹…åŒ– | MySQL | 8.0.33 | å­˜å‚¨å†å²ä¼ æ„Ÿå™¨æ•°æ®ä¸ç”¨æˆ·é…ç½® |
| åˆ†å¸ƒå¼å­˜å‚¨ | Etcd | 3.5.9 | å®æ—¶æ•°æ®ç¼“å­˜ä¸æœåŠ¡æ³¨å†Œå‘ç° |
| å®¹å™¨ç¼–æ’ | Kubernetes | 1.24+ | æœåŠ¡éƒ¨ç½²ã€æ‰©ç¼©å®¹ä¸é«˜å¯ç”¨ç®¡ç† |
| å¯è§†åŒ–å·¥å…· | Kuboard | v3 | K8sé›†ç¾¤å¯è§†åŒ–ç®¡ç†ç•Œé¢ |
| ç‰©è”ç½‘è®¾å¤‡ | ESP8266/ESP32 | - | ç¯å¢ƒä¸ç”Ÿç†æ•°æ®é‡‡é›†ç»ˆç«¯ |
| æ„å»ºå·¥å…· | Maven | 3.9+ | é¡¹ç›®æ„å»ºä¸ä¾èµ–ç®¡ç† |
| å¼€å‘ç¯å¢ƒ | JDK | 17 | Javaå¼€å‘å·¥å…·åŒ… |

---

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. å¤šç»´åº¦æ•°æ®é‡‡é›†æ¨¡å—

#### åŠŸèƒ½æè¿°
å®æ—¶æ¥æ”¶æ¥è‡ªç‰©è”ç½‘è®¾å¤‡çš„ç¯å¢ƒä¸ç”Ÿç†æ•°æ®ï¼Œæ”¯æŒå¤šè®¾å¤‡ç±»å‹ä¸æ•°æ®æ ¼å¼ã€‚

#### æŠ€æœ¯å®ç°
- **è®¾å¤‡é€‚é…**ï¼š
  - ESP8266ï¼šé‡‡é›†æ¸©åº¦ã€æ¹¿åº¦ã€å™ªéŸ³æ•°æ®
  - ESP32ï¼šé‡‡é›†å¿ƒç‡æ•°æ®ï¼ˆæ”¯æŒæ•°æ®è‡ªåŠ¨æ ¡å‡†ï¼‰

- **æ ¸å¿ƒæ¥å£**ï¼š
  ```
  POST /addSensor       # æ¥æ”¶ESP8266ç¯å¢ƒæ•°æ®
  POST /addSensor32     # æ¥æ”¶ESP32å¿ƒç‡æ•°æ®
  ```

- **æ•°æ®å¤„ç†ä»£ç **ï¼š
  ```java
  @PostMapping("/addSensor32")
  public ResponseEntity<String> addSensor32(@RequestBody Sensor32Request request) {
      try {
          // å¿ƒç‡æ•°æ®æ ¡å‡†ï¼ˆåŸå§‹å€¼/10000ï¼‰
          int calibratedRate = Integer.parseInt(request.getRate()) / 10000;
          
          // åŒæ­¥å­˜å‚¨è‡³Etcdä¸MySQL
          etcdService.putValue("heart_rate", String.valueOf(calibratedRate));
          sensorService.saveHeartRate(calibratedRate);
          
          return ResponseEntity.ok("å¿ƒç‡æ•°æ®å·²æ¥æ”¶");
      } catch (Exception e) {
          return ResponseEntity.status(500).body("æ•°æ®å¤„ç†å¤±è´¥: " + e.getMessage());
      }
  }
  ```

### 2. æ™ºèƒ½ç¡çœ ç­–ç•¥æ¨èæ¨¡å—

#### åŠŸèƒ½æè¿°
åŸºäºå¤šç»´åº¦æ•°æ®ï¼ˆæ¸©åº¦ã€æ¹¿åº¦ã€å¿ƒç‡ã€å™ªéŸ³ï¼‰åŠ¨æ€ç”Ÿæˆä¸ªæ€§åŒ–ç¡çœ å»ºè®®ã€‚

#### ç­–ç•¥ç”Ÿæˆé€»è¾‘
```java
public class StrategyService {
    /**
     * ç”Ÿæˆç»¼åˆç¡çœ ç­–ç•¥
     */
    public String generateStrategy(int temperature, int humidity, int heartRate, int noiseLevel) {
        StringBuilder strategy = new StringBuilder();
        
        // æ¸©åº¦ç­–ç•¥
        if (temperature < 15) {
            strategy.append("ç¯å¢ƒæ¸©åº¦è¾ƒä½ï¼Œå»ºè®®ä½¿ç”¨ç”µçƒ­æ¯¯é¢„çƒ­åºŠé“ºå¹¶ç©¿ç€ä¿æš–ç¡è¡£ï¼›");
        } else if (temperature > 26) {
            strategy.append("ç¯å¢ƒæ¸©åº¦è¾ƒé«˜ï¼Œå»ºè®®ä½¿ç”¨é£æ‰‡æˆ–ç©ºè°ƒå°†æ¸©åº¦è°ƒèŠ‚è‡³22-24â„ƒï¼›");
        }
        
        // æ¹¿åº¦ç­–ç•¥
        if (humidity < 30) {
            strategy.append("ç©ºæ°”å¹²ç‡¥ï¼Œå»ºè®®ä½¿ç”¨åŠ æ¹¿å™¨å°†æ¹¿åº¦ç»´æŒåœ¨40-60%ï¼›");
        } else if (humidity > 70) {
            strategy.append("ç©ºæ°”æ½®æ¹¿ï¼Œå»ºè®®å¼€å¯é™¤æ¹¿åŠŸèƒ½å¹¶å‡å°‘å§å®¤æ°´æºï¼›");
        }
        
        // å¿ƒç‡ç­–ç•¥
        if (heartRate > 90) {
            strategy.append("å¿ƒç‡åé«˜ï¼Œå»ºè®®ç¡å‰è¿›è¡Œ10åˆ†é’Ÿæ·±å‘¼å¸ç»ƒä¹ ï¼›");
        }
        
        // å™ªéŸ³ç­–ç•¥
        if (noiseLevel > 50) {
            strategy.append("ç¯å¢ƒå™ªéŸ³è¾ƒå¤§ï¼Œå»ºè®®ä½¿ç”¨ç™½å™ªéŸ³æ©ç›–å¹²æ‰°æˆ–ä½©æˆ´é™å™ªè€³å¡ï¼›");
        }
        
        return strategy.length() > 0 ? strategy.toString() : "å½“å‰ç¯å¢ƒé€‚åˆç¡çœ ï¼Œå»ºè®®ä¿æŒè§„å¾‹ä½œæ¯ã€‚";
    }
}
```

#### æ¥å£è°ƒç”¨
```
GET /getStrategy    # è·å–ç¡çœ ç­–ç•¥ï¼ˆéœ€æºå¸¦è®¤è¯ä»¤ç‰Œï¼‰
```

### 3. èˆ’ç¼“éŸ³ä¹èµ„æºç®¡ç†æ¨¡å—

#### åŠŸèƒ½æè¿°
æä¾›ç²¾é€‰åŠ©çœ éŸ³ä¹åˆ—è¡¨ï¼Œæ”¯æŒæ­Œæ›²ä¸å¯¹åº”æ­Œæ‰‹ä¿¡æ¯æŸ¥è¯¢ã€‚

#### éŸ³ä¹èµ„æºåˆ—è¡¨
| æ­Œæ›²å | æ­Œæ‰‹ | éŸ³ä¹ç±»å‹ | æ—¶é•¿ |
|-------|------|---------|------|
| ç–‘å¿ƒç—… | å¾è‰¯ | æŠ’æƒ… | 3:45 |
| å¿ƒä¼¼çƒŸç« | é™ˆå£¹åƒ | æ²»æ„ˆ | 4:12 |
| å¤å¤©çš„é£ | æ¸©å²š | èˆ’ç¼“ | 4:28 |
| æµ·åº• | ä¸€æ”¯æ¦´è² | å¹³é™ | 3:56 |
| ä¸œäº¬ä¸å¤ªçƒ­ | å°èŒ—å›§èŒ | è½»æŸ” | 3:30 |
| å¤§é›¾ | å¼ ä¸€ä¹” | ç©ºçµ | 4:05 |
| é˜¿æ‹‰æ–¯åŠ æµ·æ¹¾ | è“å¿ƒç¾½ | æ²»æ„ˆ | 3:42 |

#### æ ¸å¿ƒæ¥å£
```
GET /getMusicList      # è·å–æ­Œæ›²åˆ—è¡¨
GET /getMusicListTwo   # è·å–å¯¹åº”æ­Œæ‰‹åˆ—è¡¨
```

#### å®ç°ä»£ç 
```java
@Service
public class MusicService {
    
    /**
     * ä»èµ„æºæ–‡ä»¶è¯»å–æ­Œæ›²åˆ—è¡¨
     */
    public List<String> getMusicList() {
        try {
            Resource resource = new ClassPathResource("listName.txt");
            return Files.readAllLines(resource.getFile().toPath(), StandardCharsets.UTF_8);
        } catch (IOException e) {
            log.error("è¯»å–éŸ³ä¹åˆ—è¡¨å¤±è´¥", e);
            return Collections.emptyList();
        }
    }
    
    /**
     * ä»èµ„æºæ–‡ä»¶è¯»å–æ­Œæ‰‹åˆ—è¡¨
     */
    public List<String> getSingerList() {
        try {
            Resource resource = new ClassPathResource("Listming.txt");
            return Files.readAllLines(resource.getFile().toPath(), StandardCharsets.UTF_8);
        } catch (IOException e) {
            log.error("è¯»å–æ­Œæ‰‹åˆ—è¡¨å¤±è´¥", e);
            return Collections.emptyList();
        }
    }
}
```

### 4. å®‰å…¨è®¤è¯æ¨¡å—

#### åŠŸèƒ½æè¿°
åŸºäºä»¤ç‰Œçš„æ¥å£è®¿é—®æ§åˆ¶ï¼Œä¿æŠ¤æ•æ„Ÿæ•°æ®ä¸æ“ä½œæ¥å£ã€‚

#### è®¤è¯æµç¨‹
1. è·å–ä»¤ç‰Œï¼šé€šè¿‡`/Token`æ¥å£éªŒè¯ç”¨æˆ·ä¿¡æ¯
2. ä½¿ç”¨ä»¤ç‰Œï¼šåœ¨HTTPè¯·æ±‚å¤´ä¸­æºå¸¦`Author-token`å‚æ•°
3. ä»¤ç‰ŒéªŒè¯ï¼šæ‹¦æˆªå™¨éªŒè¯ä»¤ç‰Œæœ‰æ•ˆæ€§

#### æ ¸å¿ƒä»£ç 
```java
/**
 * ä»¤ç‰Œè®¤è¯æ‹¦æˆªå™¨
 */
@Component
public class TokenAuthInterceptor implements HandlerInterceptor {
    private static final String VALID_TOKEN = "86146e3c320c71484befa19486d76981";
    
    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) 
            throws Exception {
        // å¼€æ”¾æ¥å£æ— éœ€è®¤è¯
        String path = request.getRequestURI();
        if ("/Token".equals(path) || "/addSensor".equals(path)) {
            return true;
        }
        
        // éªŒè¯ä»¤ç‰Œ
        String token = request.getHeader("Author-token");
        if (token == null || !VALID_TOKEN.equals(token)) {
            response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);
            response.getWriter().write("è®¤è¯å¤±è´¥ï¼šæ— æ•ˆæˆ–è¿‡æœŸçš„ä»¤ç‰Œ");
            return false;
        }
        
        return true;
    }
}
```

#### æ¥å£è°ƒç”¨
```
POST /Token    # è·å–è®¿é—®ä»¤ç‰Œ
è¯·æ±‚ä½“: {"user":"X","name":"SDD"}
å“åº”: 86146e3c320c71484befa19486d76981
```

---

## ğŸ’¾ æ•°æ®æ¨¡å‹è®¾è®¡

### æ ¸å¿ƒå®ä½“ç±»

#### 1. ä¼ æ„Ÿå™¨æ•°æ®å®ä½“ï¼ˆSensor.javaï¼‰
```java
@Entity
@Table(name = "sensor")
@Data
@NoArgsConstructor
@AllArgsConstructor
public class Sensor {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;               // ä¸»é”®ID
    
    private String temperature;       // æ¸©åº¦ï¼ˆâ„ƒï¼‰
    
    private String humidity;          // æ¹¿åº¦ï¼ˆ%ï¼‰
    
    private Integer noise;            // å™ªéŸ³ï¼ˆdBï¼‰
    
    private Integer heartRate;        // å¿ƒç‡ï¼ˆæ¬¡/åˆ†é’Ÿï¼‰
    
    private LocalDateTime collectTime;// é‡‡é›†æ—¶é—´
    
    @Version
    private Long version;             // ä¹è§‚é”ç‰ˆæœ¬å·ï¼Œç”¨äºå¹¶å‘æ§åˆ¶
}
```

#### 2. æ•°æ®è®¿é—®å±‚ï¼ˆSensorRepository.javaï¼‰
```java
@Repository
public interface SensorRepository extends JpaRepository<Sensor, Integer> {
    // æŸ¥è¯¢æœ€è¿‘çš„ä¼ æ„Ÿå™¨æ•°æ®
    Optional<Sensor> findTopByOrderByCollectTimeDesc();
    
    // æŒ‰æ—¶é—´èŒƒå›´æŸ¥è¯¢æ•°æ®
    List<Sensor> findByCollectTimeBetween(LocalDateTime start, LocalDateTime end);
}
```

---

## ğŸ“Š æ¥å£æ–‡æ¡£

| æ¥å£åœ°å€ | è¯·æ±‚æ–¹æ³• | åŠŸèƒ½æè¿° | è¯·æ±‚å‚æ•° | è®¤è¯è¦æ±‚ |
|---------|---------|---------|---------|---------|
| `/Token` | POST | è·å–è®¿é—®ä»¤ç‰Œ | `{"user":"X","name":"SDD"}` | æ—  |
| `/addSensor` | POST | æ¥æ”¶ESP8266æ•°æ® | `{"temperature":"24","humidity":"55","noise":"32"}` | æ—  |
| `/addSensor32` | POST | æ¥æ”¶ESP32å¿ƒç‡æ•°æ® | `{"rate":"750000"}` | æ—  | å› å‘é€ç«¯æœªæ¢ç®— å®é™…å€¼ä¸º75
| `/getStrategy` | GET | è·å–ç¡çœ ç­–ç•¥ | - | éœ€è¦ |
| `/getMusicList` | GET | è·å–æ­Œæ›²åˆ—è¡¨ | - | éœ€è¦ |
| `/getMusicListTwo` | GET | è·å–æ­Œæ‰‹åˆ—è¡¨ | - | éœ€è¦ |
| `/getLatestSensorData` | GET | è·å–æœ€æ–°ä¼ æ„Ÿå™¨æ•°æ® | - | éœ€è¦ |
| `/getEtcdIP` | GET | è·å–Etcdé›†ç¾¤åœ°å€ | - | éœ€è¦ |

---

## ğŸ› ï¸ éƒ¨ç½²æŒ‡å—

### 1. åŸºäºVMé•œåƒçš„K8sé›†ç¾¤å¿«é€Ÿéƒ¨ç½²

#### å‰ç½®æ¡ä»¶
- è™šæ‹Ÿæœºè½¯ä»¶ï¼šVMware Workstation 16+ æˆ– VirtualBox 6+
- ç¡¬ä»¶èµ„æºï¼šè‡³å°‘8GBå†…å­˜ï¼Œ20GBç©ºé—²ç£ç›˜ç©ºé—´
- ç½‘ç»œç¯å¢ƒï¼šæ”¯æŒæ¡¥æ¥ç½‘ç»œçš„ç¯å¢ƒ

#### éƒ¨ç½²æ­¥éª¤

1. **è·å–VMé•œåƒ**
   ```
   ä¸‹è½½åœ°å€ï¼šhttps://example.com/sleep-service/etcd-cluster-vm
   é•œåƒåŒ…å«ï¼š3èŠ‚ç‚¹K8sé›†ç¾¤ï¼ˆ1ä¸»2ä»ï¼‰ã€é¢„é…ç½®çš„Etcdé›†ç¾¤ã€Dockerç¯å¢ƒ
   ```

2. **å¯¼å…¥è™šæ‹Ÿæœº**
   - è§£å‹ä¸‹è½½çš„é•œåƒæ–‡ä»¶ï¼ˆ`k8s-etcd-cluster-v1.24.7.zip`ï¼‰
   - åœ¨VMwareä¸­é€‰æ‹©"æ‰“å¼€è™šæ‹Ÿæœº"ï¼Œå¯¼å…¥`.vmx`æ–‡ä»¶
   - é‡å¤æ“ä½œå¯¼å…¥3å°èŠ‚ç‚¹è™šæ‹Ÿæœºï¼ˆmaster/worker1/worker2ï¼‰

3. **å¯åŠ¨é›†ç¾¤**
   - æŒ‰é¡ºåºå¯åŠ¨masterèŠ‚ç‚¹ï¼Œå†å¯åŠ¨workerèŠ‚ç‚¹
   - é»˜è®¤ç™»å½•ä¿¡æ¯ï¼šç”¨æˆ·å`k8s-admin`ï¼Œå¯†ç `k8s@123`
   - é›†ç¾¤è‡ªåŠ¨åˆå§‹åŒ–ï¼Œçº¦2-3åˆ†é’Ÿå®Œæˆ

4. **éªŒè¯é›†ç¾¤çŠ¶æ€**
   ```bash
   # ç™»å½•masterèŠ‚ç‚¹
   ssh k8s-admin@192.168.58.128
   
   # æ£€æŸ¥èŠ‚ç‚¹çŠ¶æ€
   kubectl get nodes
   # é¢„æœŸè¾“å‡º3ä¸ªèŠ‚ç‚¹å‡ä¸ºReadyçŠ¶æ€
   
   # æ£€æŸ¥Etcdé›†ç¾¤å¥åº·çŠ¶æ€
   etcdctl --endpoints=http://192.168.58.128:2379,http://192.168.58.129:2379,http://192.168.58.130:2379 endpoint health
   ```

### 2. Kuboardå¯è§†åŒ–ç•Œé¢éƒ¨ç½²

#### éƒ¨ç½²æ­¥éª¤
1. åœ¨masterèŠ‚ç‚¹æ‰§è¡Œå®‰è£…å‘½ä»¤ï¼š
   ```bash
   kubectl apply -f https://addons.kuboard.cn/kuboard/kuboard-v3.yaml
   ```

2. ç¡®è®¤éƒ¨ç½²çŠ¶æ€ï¼š
   ```bash
   kubectl get pods -n kuboard
   # ç­‰å¾…kuboard-v3-xxxx podçŠ¶æ€å˜ä¸ºRunning
   ```

3. è®¿é—®Kuboardï¼š
   - æµè§ˆå™¨æ‰“å¼€ï¼š`http://192.168.58.128:30000`
   - åˆå§‹ç™»å½•ä¿¡æ¯ï¼šç”¨æˆ·å`admin`ï¼Œå¯†ç `Kuboard123`

4. å¯¼å…¥é›†ç¾¤ï¼š
   - ç‚¹å‡»"æ·»åŠ é›†ç¾¤"ï¼Œè¾“å…¥é›†ç¾¤åç§°`sleep-service-cluster`
   - è‡ªåŠ¨åŠ è½½kubeconfigé…ç½®ï¼Œç‚¹å‡»"å¯¼å…¥"å®Œæˆé…ç½®

#### Kuboardæ ¸å¿ƒåŠŸèƒ½
- é›†ç¾¤æ¦‚è§ˆï¼šèŠ‚ç‚¹èµ„æºä½¿ç”¨ç‡ã€Podåˆ†å¸ƒã€å¥åº·çŠ¶æ€ç›‘æ§
- å·¥ä½œè´Ÿè½½ç®¡ç†ï¼šéƒ¨ç½²ã€ä¼¸ç¼©ã€å‡çº§Sleep Serviceåº”ç”¨
- æ—¥å¿—ä¸­å¿ƒï¼šå®æ—¶æŸ¥çœ‹åº”ç”¨è¿è¡Œæ—¥å¿—ä¸æ¥å£è°ƒç”¨è®°å½•
- èµ„æºç›‘æ§ï¼šCPUã€å†…å­˜ã€ç½‘ç»œIOç­‰æ€§èƒ½æŒ‡æ ‡å¯è§†åŒ–

### 3. Sleep Serviceåº”ç”¨éƒ¨ç½²

#### éƒ¨ç½²æ­¥éª¤
1. å…‹éš†ä»£ç ä»“åº“ï¼š
   ```bash
   git clone https://github.com/Ginger-Sanshui/sleep_service.git
   cd sleep_service/demo
   ```

2. æ„å»ºDockeré•œåƒï¼š
   ```bash
   # æ„å»ºåº”ç”¨é•œåƒ
   docker build -t sleep-service:v1.0 .
   
   # æ¨é€é•œåƒåˆ°é›†ç¾¤å†…éƒ¨ä»“åº“ï¼ˆæˆ–ä½¿ç”¨ç§æœ‰ä»“åº“ï¼‰
   docker tag sleep-service:v1.0 192.168.58.128:5000/sleep-service:v1.0
   docker push 192.168.58.128:5000/sleep-service:v1.0
   ```

3. éƒ¨ç½²åˆ°K8sé›†ç¾¤ï¼š
   ```bash
   # åˆ›å»ºéƒ¨ç½²é…ç½®
   kubectl apply -f k8s/deployment.yaml
   
   # åˆ›å»ºæœåŠ¡æš´éœ²
   kubectl apply -f k8s/service.yaml
   
   # æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€
   kubectl get pods
   ```

4. éªŒè¯æœåŠ¡ï¼š
   ```bash
   # æ£€æŸ¥æœåŠ¡æš´éœ²ç«¯å£
   kubectl get svc sleep-service
   
   # æµ‹è¯•æ¥å£è®¿é—®
   curl http://192.168.58.128:30084/getMusicList
   ```

### 4. æ‰‹æœºç«¯APPé…ç½®
### ç§»åŠ¨ç«¯åº”ç”¨ï¼ˆAndroidï¼‰

#### åŠŸèƒ½æ¦‚è¿°
Androidå®¢æˆ·ç«¯ä½œä¸ºç”¨æˆ·ä¸»è¦äº¤äº’å…¥å£ï¼Œæä¾›æ•°æ®å¯è§†åŒ–ã€ç­–ç•¥æŸ¥çœ‹ã€éŸ³ä¹æ§åˆ¶ç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œæ”¯æŒç¦»çº¿æ•°æ®ç¼“å­˜ä¸å®æ—¶åŒæ­¥ã€‚

#### æ ¸å¿ƒåŠŸèƒ½
- **å®æ—¶æ•°æ®çœ‹æ¿**ï¼šä»¥å›¾è¡¨å½¢å¼å±•ç¤ºæ¸©åº¦ã€æ¹¿åº¦ã€å™ªéŸ³ã€å¿ƒç‡å®æ—¶æ•°æ®ä¸å˜åŒ–è¶‹åŠ¿
- **ç¡çœ ç­–ç•¥ä¸­å¿ƒ**ï¼šå±•ç¤ºç³»ç»Ÿç”Ÿæˆçš„ä¸ªæ€§åŒ–ç¡çœ å»ºè®®ï¼Œæ”¯æŒä¸€é”®æ”¶è—å¸¸ç”¨ç­–ç•¥
- **åŠ©çœ éŸ³ä¹æ’­æ”¾å™¨**ï¼šé›†æˆéŸ³ä¹æ’­æ”¾æ§ä»¶ï¼Œæ”¯æŒåˆ—è¡¨å¾ªç¯ã€å®šæ—¶å…³é—­ç­‰åŠŸèƒ½
- **è®¾å¤‡ç®¡ç†**ï¼šæ˜¾ç¤ºä¼ æ„Ÿå™¨è¿æ¥çŠ¶æ€ï¼Œæ”¯æŒå¼‚å¸¸å‘Šè­¦è®¾ç½®
- **æ•°æ®ç»Ÿè®¡**ï¼šæŒ‰æ—¥/å‘¨/æœˆç»Ÿè®¡ç¡çœ ç¯å¢ƒæ•°æ®ï¼Œç”Ÿæˆè¶‹åŠ¿æŠ¥å‘Š

#### æŠ€æœ¯å®ç°
- æ¶æ„æ¨¡å¼ï¼šMVVMæ¶æ„ï¼Œä½¿ç”¨ViewModel+LiveDataå®ç°æ•°æ®ä¸UIåˆ†ç¦»
- ç½‘ç»œè¯·æ±‚ï¼šRetrofit+OkHttpå®ç°RESTful APIè°ƒç”¨ï¼Œæ”¯æŒè¯·æ±‚æ‹¦æˆªä¸ä»¤ç‰Œç®¡ç†
- æ•°æ®å­˜å‚¨ï¼šRoomæ•°æ®åº“å®ç°æœ¬åœ°æ•°æ®ç¼“å­˜ï¼ŒSharedPreferenceså­˜å‚¨ç”¨æˆ·é…ç½®
- å›¾è¡¨å±•ç¤ºï¼šMPAndroidChartå®ç°ç¯å¢ƒæ•°æ®è¶‹åŠ¿å›¾
- åå°æœåŠ¡ï¼šForeground Serviceå®ç°éŸ³ä¹åå°æ’­æ”¾ä¸æ•°æ®å®æ—¶åŒæ­¥

#### æºä»£ç ä»“åº“
Androidå®¢æˆ·ç«¯æºä»£ç å·²å¼€æºï¼Œä»“åº“åœ°å€ï¼š
```
https://github.com/Ginger-Sanshui/sleep_android
```

## ğŸ” è¿ç»´ä¸ç›‘æ§

### æ—¥å¸¸è¿ç»´å‘½ä»¤
```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
kubectl logs -f deployment/sleep-service

# é‡å¯åº”ç”¨
kubectl rollout restart deployment sleep-service

# æ‰©å±•å‰¯æœ¬æ•°
kubectl scale deployment sleep-service --replicas=3

# æŸ¥çœ‹Etcdå­˜å‚¨æ•°æ®
etcdctl get / --prefix --keys-only

# æŸ¥çœ‹æ•°æ®åº“è¿æ¥
kubectl exec -it <mysql-pod> -- mysql -u root -pSensor@123 -e "show processlist"
```

### å¸¸è§é—®é¢˜æ’æŸ¥
1. **Kuboardè®¿é—®å¤±è´¥**
   ```bash
   # æ£€æŸ¥æœåŠ¡æ˜¯å¦æ­£å¸¸
   kubectl get svc -n kuboard
   
   # æ£€æŸ¥ç«¯å£æ˜ å°„
   netstat -tpln | grep 30000
   ```

2. **ä¼ æ„Ÿå™¨æ•°æ®ä¸ä¸ŠæŠ¥**
   ```bash
   # æ£€æŸ¥æœåŠ¡ç«¯å£æ˜¯å¦å¯è¾¾
   telnet 192.168.58.128 30084
   
   # æŸ¥çœ‹æ¥å£è°ƒç”¨æ—¥å¿—
   kubectl logs -f deployment/sleep-service | grep addSensor
   ```

3. **Etcdé›†ç¾¤å¼‚å¸¸**
   ```bash
   # æ£€æŸ¥é›†ç¾¤æˆå‘˜çŠ¶æ€
   etcdctl member list
   
   # æŸ¥çœ‹é›†ç¾¤å¥åº·çŠ¶æ€
   etcdctl endpoint health --cluster
   ```

---

## ğŸ“œ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ Apache 2.0 è®¸å¯è¯å¼€æºï¼Œè¯¦æƒ…å‚è§ LICENSE æ–‡ä»¶ã€‚

---

<div align="center">
  <p>âœ¨ è®©ç§‘æŠ€å®ˆæŠ¤ä½ çš„ä¼˜è´¨ç¡çœ  âœ¨</p>
  <p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/Ginger-Sanshui/sleep_service">https://github.com/Ginger-Sanshui/sleep_service</a></p>
</div>








